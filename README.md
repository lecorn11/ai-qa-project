# AI æ™ºèƒ½é—®ç­”ç³»ç»Ÿ
åŸºäº **LangChain + FastAPI** æ„å»ºçš„æ™ºèƒ½å¯¹è¯åº”ç”¨ï¼Œæ”¯æŒ RAG çŸ¥è¯†åº“é—®ç­”ã€Agent å·¥å…·è°ƒç”¨ã€MCP åè®®é›†æˆã€æµå¼å“åº”ï¼Œé‡‡ç”¨ **Clean Architecture** æ¶æ„è®¾è®¡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§
- **æ™ºèƒ½å¯¹è¯**ï¼šæ¥å…¥é€šä¹‰åƒé—®å¤§æ¨¡å‹ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¸Šä¸‹æ–‡è®°å¿†
- **RAG çŸ¥è¯†åº“**ï¼šä¸Šä¼ æ–‡æ¡£æ„å»ºçŸ¥è¯†åº“ï¼ŒåŸºäºæ–‡æ¡£å†…å®¹ç²¾å‡†å›ç­”
- **Agent å·¥å…·è°ƒç”¨**ï¼šAI è‡ªä¸»å†³ç­–è°ƒç”¨è®¡ç®—å™¨ã€æ—¶é—´æŸ¥è¯¢ã€çŸ¥è¯†åº“æ£€ç´¢ç­‰å·¥å…·
- **MCP åè®®æ”¯æŒ**ï¼šé›†æˆ Model Context Protocolï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·
- **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒ PDFã€TXT æ–‡ä»¶ä¸Šä¼ ï¼Œè‡ªåŠ¨è§£æå…¥åº“
- **æŸ¥è¯¢æ”¹å†™**ï¼šæ”¯æŒè‡ªåŠ¨è§£å†³å¯¹è¯ä¸­çš„æŒ‡ä»£é—®é¢˜ï¼ˆå¦‚â€œå®ƒæ˜¯ä»€ä¹ˆâ€œï¼‰
- **æµå¼å“åº”**ï¼šAI å›å¤é€å­—æ˜¾ç¤ºï¼Œæ‰“å­—æœºæ•ˆæœä½“éªŒ
- **Clean Architecture**ï¼šæ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **å¯æ‹”æ’è®¾è®¡**ï¼šè½»æ¾åˆ‡æ¢ä¸åŒçš„ LLM æä¾›å•†

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

æœ¬é¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ AI åº”ç”¨ï¼Œæ›´æ˜¯ä¸€ä¸ª**æ¶æ„è®¾è®¡ä¸å·¥ç¨‹å®è·µçš„ç»¼åˆå±•ç¤º**ï¼š

| ç»´åº¦ | äº®ç‚¹ | æŠ€æœ¯ä½“ç° |
|-----|------|---------|
| **æ¶æ„è®¾è®¡** | Clean Architecture åˆ†å±‚ | ä¾èµ–åè½¬ã€ç«¯å£-é€‚é…å™¨æ¨¡å¼ã€å…³æ³¨ç‚¹åˆ†ç¦» |
| **AI å·¥ç¨‹** | RAG + Agent åŒæ¨¡å¼ | å‘é‡æ£€ç´¢ã€æŸ¥è¯¢æ”¹å†™ã€Function Callingã€MCP åè®® |
| **åç«¯èƒ½åŠ›** | å®Œæ•´çš„ API è®¾è®¡ | RESTfulã€JWT è®¤è¯ã€æµå¼å“åº”ï¼ˆSSEï¼‰ã€å¤šç”¨æˆ·éš”ç¦» |
| **æ•°æ®å±‚** | PostgreSQL + pgvector | å…³ç³»æ•°æ®ä¸å‘é‡æ•°æ®ç»Ÿä¸€å­˜å‚¨ï¼ŒACID ä¿è¯ |
| **å·¥ç¨‹åŒ–** | ç”Ÿäº§çº§ä»£ç è´¨é‡ | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€Docker éƒ¨ç½²ã€ç»“æ„åŒ–æ—¥å¿— |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ
| å±‚çº§ | æŠ€æœ¯ |
|-----|------|
| **åç«¯æ¡†æ¶** | FastAPI |
| **AI æ¡†æ¶** | LangChain |
| **LLM** | é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ |
| **Embedding** | DashScope text-embedding-v3 |
| **å‘é‡æ•°æ®åº“** | PostgreSQL + pgvector |
| **å…³ç³»æ•°æ®åº“** | PostgreSQL |
| **MCP åè®®** | mcp (Model Context Protocol) |
| **æ–‡æ¡£è§£æ** | pypdf |
| **å‰ç«¯** |HTML + CSS + JavaScript|
| **é…ç½®ç®¡ç†** | Pydantic Settings |
| **å®¹å™¨åŒ–** | Docker + docker-compose|
| **æµ‹è¯•** | pytest |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

![ç³»ç»Ÿæ¶æ„å›¾](docs/images/architecture.png)

### æ¶æ„è®¾è®¡ç†å¿µ
é‡‡ç”¨æ•´æ´æ¶æ„ Clean Architectureï¼Œä¾èµ–æ–¹å‘ä»å¤–åˆ°å†…ï¼š

- **é¢†åŸŸå±‚**ï¼šå®šä¹‰ä¸šåŠ¡å®ä½“å’Œç«¯å£ï¼ˆEntities/Portsï¼‰
- **åº”ç”¨å±‚**ï¼šç¼–æ’ä¸šåŠ¡é€»è¾‘ï¼Œä¸ä¾èµ–å…·ä½“æŠ€æœ¯
- **åŸºç¡€è®¾æ–½å±‚**ï¼šå®ç°æ¥å£ï¼ˆAdaptersï¼‰ï¼Œå¯¹æ¥å¤–éƒ¨æœåŠ¡
- **æ¥å£å±‚**ï¼šæš´éœ² APIã€CLIã€Web ç­‰å…¥å£


## ğŸ§  æ ¸å¿ƒæµç¨‹

### RAG æ£€ç´¢å¢å¼ºç”Ÿæˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç¦»çº¿å»ºåº“æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–‡æ¡£ä¸Šä¼  â†’ æ–‡æœ¬æå– â†’ åˆ†å—åˆ‡åˆ† â†’ Embedding â†’ å­˜å…¥å‘é‡æ•°æ®åº“       â”‚
â”‚            (pypdf)   (500å­—/å—)  (text-embedding-v3)  (pgvector) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åœ¨çº¿é—®ç­”æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·æé—® â†’ æŸ¥è¯¢æ”¹å†™ â†’ Embedding â†’ å‘é‡æ£€ç´¢ â†’ æ„å»ºPrompt â†’ LLMç”Ÿæˆ â”‚
â”‚           (è§£å†³æŒ‡ä»£)              (Top-K)    (å«æ£€ç´¢ç»“æœ)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŸ¥è¯¢æ”¹å†™ç¤ºä¾‹**ï¼š
```
å¯¹è¯å†å²: "Python æ˜¯ä»€ä¹ˆï¼Ÿ"
ç”¨æˆ·è¿½é—®: "å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"
æ”¹å†™ç»“æœ: "Python æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"  â† è‡ªåŠ¨è¡¥å…¨æŒ‡ä»£
```

### Agent å·¥å…·è°ƒç”¨æµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM åˆ¤æ–­   â”‚ â† æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ï¼Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€ éœ€è¦å·¥å…· â”€â”€â”€â”
    â”‚                â–¼
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚  æ‰§è¡Œå·¥å…·    â”‚ (è®¡ç®—å™¨/æ—¶é—´/çŸ¥è¯†åº“æ£€ç´¢)
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚
    â”‚                â–¼
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚ ç»“æœè¿”å›LLM  â”‚ â† ç»§ç»­åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´å¤šå·¥å…·
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼ ä¸éœ€è¦å·¥å…·
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿæˆå›ç­”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MCP é›†æˆæ¶æ„

```
mcp_servers.json (é…ç½®æ–‡ä»¶)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCPClientService   â”‚ â† è¯»å–é…ç½®ï¼Œç®¡ç†å¤šä¸ª Server è¿æ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿æ¥ MCP Server    â”‚ â† é€šè¿‡ stdio åè®®é€šä¿¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–å·¥å…·åˆ—è¡¨        â”‚ â† åŠ¨æ€å‘ç° Server æä¾›çš„å·¥å…·
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è½¬æ¢ä¸º LangChain å·¥å…·â”‚ â† é€‚é… Agent è°ƒç”¨æ¥å£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AgentService è°ƒç”¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç»“æ„
```
ai-qa-project/
â”œâ”€â”€ src/ai_qa/
â”‚   â”œâ”€â”€ domain/                 # é¢†åŸŸå±‚ï¼šå®ä½“å’Œæ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ entities.py         # Message, Conversation, DocumentChunkå®ä½“
â”‚   â”‚   â”œâ”€â”€ ports.py            # LLMPort, MemoryPort, EmbeddingPort, VectorStorePort
â”‚   â”‚   â””â”€â”€ exceptions.py       # ä¸šåŠ¡å¼‚å¸¸å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ application/            # åº”ç”¨å±‚ï¼šä¸šåŠ¡é€»è¾‘ç¼–æ’
â”‚   â”‚   â”œâ”€â”€ chat_service.py     # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ agent_service.py    # Agent æœåŠ¡ï¼ˆå·¥å…·è°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ knowledge_service.py # çŸ¥è¯†åº“æœåŠ¡ï¼ˆRAG + æŸ¥è¯¢æ”¹å†™ï¼‰
â”‚   â”‚   â”œâ”€â”€ knowledge_base_service.py # çŸ¥è¯†åº“ç®¡ç†
â”‚   â”‚   â””â”€â”€ user_service.py     # ç”¨æˆ·æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/         # åŸºç¡€è®¾æ–½å±‚ï¼šå¤–éƒ¨æœåŠ¡å®ç°
â”‚   â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”‚   â””â”€â”€ qwen_adapter.py # é€šä¹‰åƒé—® LLM é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ embedding/
â”‚   â”‚   â”‚   â””â”€â”€ dashscope_embedding.py
â”‚   â”‚   â”œâ”€â”€ vectorstore/
â”‚   â”‚   â”‚   â”œâ”€â”€ faiss_store.py  # FAISS å‘é‡å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ postgres_store.py # PostgreSQL + pgvector
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.py   # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ models.py       # ORM æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â”‚   â”œâ”€â”€ in_memory.py    # å†…å­˜å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ postgres_memory.py # PostgreSQL å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ mcp/                # MCP åè®®æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py       # MCP å®¢æˆ·ç«¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py       # MCP é…ç½®åŠ è½½
â”‚   â”‚   â”‚   â””â”€â”€ server.py       # MCP Server
â”‚   â”‚   â”œâ”€â”€ tools/              # Agent å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ calculator.py
â”‚   â”‚   â”‚   â”œâ”€â”€ time_tool.py
â”‚   â”‚   â”‚   â””â”€â”€ knowledge_search.py
â”‚   â”‚   â”œâ”€â”€ auth/               # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ security.py     # JWT + å¯†ç å“ˆå¸Œ
â”‚   â”‚   â””â”€â”€ document/
â”‚   â”‚       â””â”€â”€ pdf_reader.py   # PDF è§£æ
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/             # æ¥å£å±‚ï¼šå¯¹å¤–æš´éœ²
â”‚   â”‚   â”œâ”€â”€ api/                # FastAPI è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mcp.py
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation_routes.py
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge_routes.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_routes.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_routes.py
â”‚   â”‚   â”‚   â””â”€â”€ mcp_routes.py
â”‚   â”‚   â”œâ”€â”€ cli/                # å‘½ä»¤è¡Œå…¥å£
â”‚   â”‚   â””â”€â”€ web/                # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ settings.py         # Pydantic Settings
â”‚       â””â”€â”€ logging.py          # æ—¥å¿—é…ç½®
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_chat_service.py
â”‚   â”‚   â”œâ”€â”€ test_user_service.py
â”‚   â”‚   â”œâ”€â”€ test_knowledge_base_service.py
â”‚   â”‚   â””â”€â”€ test_agent_service.py
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_api.py
â”‚   â””â”€â”€ conftest.py             # pytest fixtures
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ init.sql                # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ mcp_servers.json            # MCP Server é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.12+
- PostgreSQL 15+ (with pgvector extension)
- Docker & Docker Compose (å¯é€‰)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/lecorn11/ai-qa-project.git
cd ai-qa-project
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
conda create -n ai-qa python=3.12 -y
conda activate ai-qa
```

### 3. å®‰è£…ä¾èµ–

```bash
pip install -e .
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# AI æ¨¡å‹é…ç½®
LLM_API_KEY=your-api-key
LLM_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
LLM_MODEL_NAME=qwen-turbo
EMBEDDING_MODEL_NAME=text-embedding-v3

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://ai_qa_user:ai_qa_password@localhost:5432/ai_qa_db

# JWT é…ç½®
JWT_SECRET_KEY=your-secret-key

# åº”ç”¨é…ç½®
APP_ENV=development
DEBUG=true
```

### 5. å¯åŠ¨æ•°æ®åº“

```bash
docker-compose up -d postgres
```

### 6. å¯åŠ¨æœåŠ¡

```bash
python run_api.py
```

### 7. è®¿é—®åº”ç”¨

| å…¥å£ | åœ°å€ |
|-----|------|
| Web ç•Œé¢ | http://localhost:8000 |
| API æ–‡æ¡£ (Swagger) | http://localhost:8000/docs |

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ docker-composeï¼ˆæ¨èï¼‰
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ‰‹åŠ¨æ„å»ºè¿è¡Œ
```bash
# æ„å»ºé•œåƒ
docker build -t ai-qa-app .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 --env-file .env ai-qa-app
```

## ğŸ“– API æ–‡æ¡£

### è®¤è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/v1/auth/login` | ç”¨æˆ·ç™»å½• |
| GET | `/api/v1/auth/me` | è·å–å½“å‰ç”¨æˆ· |

### å¯¹è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/conversations` | åˆ›å»ºä¼šè¯ |
| GET | `/api/v1/conversations` | è·å–ä¼šè¯åˆ—è¡¨ |
| POST | `/api/v1/conversations/{session_id}/messages` | å‘é€æ¶ˆæ¯ |
| POST | `/api/v1/conversations/{session_id}/messages/stream` | å‘é€æ¶ˆæ¯ï¼ˆæµå¼ï¼‰ |
| GET | `/api/v1/conversations/{session_id}/messages` | è·å–å¯¹è¯å†å² |
| DELETE | `/api/v1/conversations/{session_id}` | åˆ é™¤ä¼šè¯ |

### çŸ¥è¯†åº“æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/knowledge-bases` | åˆ›å»ºçŸ¥è¯†åº“ |
| GET | `/api/v1/knowledge-bases` | è·å–çŸ¥è¯†åº“åˆ—è¡¨ |
| GET | `/api/v1/knowledge-bases/{kb_id}` | è·å–çŸ¥è¯†åº“è¯¦æƒ… |
| PUT | `/api/v1/knowledge-bases/{kb_id}` | æ›´æ–°çŸ¥è¯†åº“ |
| DELETE | `/api/v1/knowledge-bases/{kb_id}` | åˆ é™¤çŸ¥è¯†åº“ |
| POST | `/api/v1/knowledge-bases/{kb_id}/documents/text` | æ·»åŠ æ–‡æœ¬ |
| POST | `/api/v1/knowledge-bases/{kb_id}/documents/upload` | ä¸Šä¼ æ–‡ä»¶ |

### Agent æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/agent/chat` | Agent å¯¹è¯ |
| POST | `/api/v1/agent/chat/stream` | Agent å¯¹è¯ï¼ˆæµå¼ï¼‰ |

### MCP è®¾ç½®æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| GET | `/api/v1/mcp/servers` | è·å–å¯ç”¨çš„ MCP Server åˆ—è¡¨ |
| GET | `/api/v1/mcp/settings` | è·å–ç”¨æˆ· MCP è®¾ç½® |
| PUT | `/api/v1/mcp/settings` | æ›´æ–° MCP è®¾ç½® |

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
pytest --cov=ai_qa
```

## ğŸ—ºï¸ å¼€å‘è®¡åˆ’

- [x] æ™ºèƒ½å¯¹è¯ï¼šå¤šè½®å¯¹è¯ã€ä¸Šä¸‹æ–‡è®°å¿†
- [x] RAG çŸ¥è¯†åº“ï¼šæ–‡æ¡£ä¸Šä¼ ã€å‘é‡æ£€ç´¢
- [x] æŸ¥è¯¢æ”¹å†™ï¼šè§£å†³å¯¹è¯ä¸­çš„æŒ‡ä»£é—®é¢˜
- [x] æµå¼å“åº”ï¼šSSE å®æ—¶è¿”å›
- [x] ç”¨æˆ·è®¤è¯ï¼šJWT Tokenã€å¤šç”¨æˆ·æ”¯æŒ
- [x] PostgreSQLï¼šå¯¹è¯å†å²ã€å‘é‡å­˜å‚¨æŒä¹…åŒ–
- [x] Docker éƒ¨ç½²ï¼šå®¹å™¨åŒ–æ–¹æ¡ˆ
- [x] å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- [x] Agent å·¥å…·è°ƒç”¨ï¼šè®¡ç®—å™¨ã€æ—¶é—´ã€çŸ¥è¯†åº“æ£€ç´¢
- [x] MCP åè®®æ”¯æŒï¼šåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·
- [x] Agent ReActæ€ç»´é“¾
- [ ] RAG æ£€ç´¢å¢å¼ºï¼ˆRerankã€å›ç­”æ ‡æ³¨æ¥æºï¼‰
- [ ] Agent Skill æ”¯æŒ
- [ ] å¤š LLM æä¾›å•†ï¼ˆOpenAIã€Claudeã€DeepSeekï¼‰
- [ ] å¯¹è¯æ‘˜è¦/é•¿æœŸè®°å¿†
- [ ] å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—