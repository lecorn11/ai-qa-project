# AI æ™ºèƒ½é—®ç­”ç³»ç»Ÿ
åŸºäº **LangChain + FastAPI** æ„å»ºçš„æ™ºèƒ½å¯¹è¯åº”ç”¨ï¼Œæ”¯æŒ RAG çŸ¥è¯†åº“é—®ç­”ã€Agent å·¥å…·è°ƒç”¨ã€MCP åè®®é›†æˆã€æµå¼å“åº”ï¼Œé‡‡ç”¨ **Clean Architecture** æ¶æ„è®¾è®¡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§
- **æ™ºèƒ½å¯¹è¯**ï¼šæ¥å…¥é€šä¹‰åƒé—®å¤§æ¨¡å‹ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¸Šä¸‹æ–‡è®°å¿†
- **RAG çŸ¥è¯†åº“**ï¼šä¸Šä¼ æ–‡æ¡£æ„å»ºçŸ¥è¯†åº“ï¼ŒåŸºäºæ–‡æ¡£å†…å®¹ç²¾å‡†å›ç­”
- **Agent å·¥å…·è°ƒç”¨**ï¼šAI è‡ªä¸»å†³ç­–è°ƒç”¨è®¡ç®—å™¨ã€æ—¶é—´æŸ¥è¯¢ã€çŸ¥è¯†åº“æ£€ç´¢ç­‰å·¥å…·
- **MCP åè®®æ”¯æŒ**ï¼šé›†æˆ Model Context Protocolï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·
- **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒ PDFã€TXT æ–‡ä»¶ä¸Šä¼ ï¼Œè‡ªåŠ¨è§£æå…¥åº“
- **æŸ¥è¯¢æ”¹å†™**ï¼šæ”¯æŒè‡ªåŠ¨è§£å†³å¯¹è¯ä¸­çš„æŒ‡ä»£é—®é¢˜ï¼ˆå¦‚â€œå®ƒæ˜¯ä»€ä¹ˆâ€œï¼‰
- **æµå¼å“åº”**ï¼šAI å›å¤é€å­—æ˜¾ç¤ºï¼Œæ‰“å­—æœºæ•ˆæœä½“éªŒ
- **Clean Architecture**ï¼šæ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **å¯æ‹”æ’è®¾è®¡**ï¼šè½»æ¾åˆ‡æ¢ä¸åŒçš„ LLM æä¾›å•†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ
| å±‚çº§ | æŠ€æœ¯ |
|-----|------|
| **åç«¯æ¡†æ¶** | FastAPI |
| **AI æ¡†æ¶** | LangChain |
| **LLM** | é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ |
| **Embedding** | DashScope text-embedding-v3 |
| **å‘é‡æ•°æ®åº“** | PostgreSQL + pgvector |
| **å…³ç³»æ•°æ®åº“** | PostgreSQL |
| **MCP åè®®** | mcp (Model Context Protocol) |
| **æ–‡æ¡£è§£æ** | pypdf |
| **å‰ç«¯** |HTML + CSS + JavaScript|
| **é…ç½®ç®¡ç†** | Pydantic Settings |
| **å®¹å™¨åŒ–** | Docker + docker-compose|
| **æµ‹è¯•** | pytest |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Interfaces æ¥å£å±‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Web UI    â”‚  â”‚  REST API   â”‚  â”‚        CLI          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Application åº”ç”¨å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ChatService  â”‚ â”‚ AgentService â”‚ â”‚  KnowledgeService    â”‚ â”‚
â”‚  â”‚  (å¯¹è¯æœåŠ¡)   â”‚ â”‚ (AgentæœåŠ¡)   â”‚ â”‚ (çŸ¥è¯†åº“+æŸ¥è¯¢æ”¹å†™)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ McpSettingsService (MCP è®¾ç½®æœåŠ¡)                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Domain é¢†åŸŸå±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Entities   â”‚  â”‚              Ports                   â”‚ â”‚
â”‚  â”‚ Message      â”‚  â”‚ LLMPort, EmbeddingPort,              â”‚ â”‚
â”‚  â”‚ Conversation â”‚  â”‚ VectorStorePort, MemoryPort          â”‚ â”‚
â”‚  â”‚ DocumentChunkâ”‚  â”‚                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 Infrastructure åŸºç¡€è®¾æ–½å±‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚QwenAdapter â”‚ â”‚ DashScope  â”‚ â”‚ PostgreSQL â”‚ â”‚  Tools   â”‚ â”‚
â”‚  â”‚   (LLM)    â”‚ â”‚ (Embedding)â”‚ â”‚ (pgvector) â”‚ â”‚è®¡ç®—å™¨/æ—¶é—´ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              MCP Client Service                        â”‚ â”‚
â”‚  â”‚  (MCP åè®®å®¢æˆ·ç«¯ï¼ŒåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·)                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„
```
ai-qa-project/
â”œâ”€â”€ src/ai_qa/
â”‚   â”œâ”€â”€ domain/                 # é¢†åŸŸå±‚ï¼šå®ä½“å’Œæ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ entities.py         # Message, Conversation, DocumentChunkå®ä½“
â”‚   â”‚   â””â”€â”€ ports.py            # LLMPort, MemoryPort, EmbeddingPort, VectorStorePort
â”‚   â”‚   â””â”€â”€ exceptions.py       # ä¸šåŠ¡å¼‚å¸¸å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ application/            # åº”ç”¨å±‚ï¼šä¸šåŠ¡é€»è¾‘ç¼–æ’
â”‚   â”‚   â”œâ”€â”€ chat_service.py     # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ agent_service.py    # Agent æœåŠ¡ï¼ˆå·¥å…·è°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ knowledge_service.py # çŸ¥è¯†åº“æœåŠ¡ï¼ˆRAG + æŸ¥è¯¢æ”¹å†™ï¼‰
â”‚   â”‚   â”œâ”€â”€ knowledge_base_service.py # çŸ¥è¯†åº“ç®¡ç†
â”‚   â”‚   â””â”€â”€ user_service.py     # ç”¨æˆ·æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/         # åŸºç¡€è®¾æ–½å±‚ï¼šå¤–éƒ¨æœåŠ¡å®ç°
â”‚   â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â”‚   â””â”€â”€ qwen_adapter.py # é€šä¹‰åƒé—® LLM é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ embedding/
â”‚   â”‚   â”‚   â””â”€â”€ dashscope_embedding.py
â”‚   â”‚   â”œâ”€â”€ vectorstore/
â”‚   â”‚   â”‚   â”œâ”€â”€ faiss_store.py  # FAISS å‘é‡å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ postgres_store.py # PostgreSQL + pgvector
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.py   # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ models.py       # ORM æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â”‚   â”œâ”€â”€ in_memory.py    # å†…å­˜å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ postgres_memory.py # PostgreSQL å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ mcp/                # MCP åè®®æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py       # MCP å®¢æˆ·ç«¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py       # MCP é…ç½®åŠ è½½
â”‚   â”‚   â”‚   â””â”€â”€ server.py       # MCP Server
â”‚   â”‚   â”œâ”€â”€ tools/              # Agent å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ calculator.py
â”‚   â”‚   â”‚   â”œâ”€â”€ time_tool.py
â”‚   â”‚   â”‚   â””â”€â”€ knowledge_search.py
â”‚   â”‚   â”œâ”€â”€ auth/               # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ security.py     # JWT + å¯†ç å“ˆå¸Œ
â”‚   â”‚   â””â”€â”€ document/
â”‚   â”‚       â””â”€â”€ pdf_reader.py   # PDF è§£æ
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/             # æ¥å£å±‚ï¼šå¯¹å¤–æš´éœ²
â”‚   â”‚   â”œâ”€â”€ api/                # FastAPI è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.py       # å¯¹è¯è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge_routes.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_routes.py
â”‚   â”‚   â”‚   â””â”€â”€ agent_routes.py # Agent è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ cli/                # å‘½ä»¤è¡Œå…¥å£
â”‚   â”‚   â””â”€â”€ web/                # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # Pydantic è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â””â”€â”€ knowledge.py
â”‚   â”‚   â””â”€â”€ mcp.py              # MCP ç›¸å…³æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ settings.py         # Pydantic Settings
â”‚       â””â”€â”€ logging.py          # æ—¥å¿—é…ç½®
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_chat_service.py
â”‚   â”‚   â”œâ”€â”€ test_user_service.py
â”‚   â”‚   â”œâ”€â”€ test_knowledge_base_service.py
â”‚   â”‚   â””â”€â”€ test_agent_service.py
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_api.py
â”‚   â””â”€â”€ conftest.py             # pytest fixtures
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ init.sql                # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ mcp_servers.json            # MCP Server é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/ai-qa-project.git
cd ai-qa-project
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
conda create -n ai-qa python=3.12 -y
conda activate ai-qa
```

### 3. å®‰è£…ä¾èµ–

```bash
pip install -e .
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶å¹¶å¡«å…¥ä½ çš„ API Keyï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# AI æ¨¡å‹é…ç½®
LLM_API_KEY=your-api-key
LLM_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
LLM_MODEL_NAME=qwen-turbo
EMBEDDING_MODEL_NAME=text-embedding-v3

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://ai_qa_user:ai_qa_password@localhost:5432/ai_qa_db

# JWT é…ç½®
JWT_SECRET_KEY=your-secret-key

# åº”ç”¨é…ç½®
APP_ENV=development
DEBUG=true
```

### 5. å¯åŠ¨æ•°æ®åº“

```bash
docker-compose up -d postgres
```

### 6. å¯åŠ¨æœåŠ¡

```bash
python run_api.py
```

### 7. è®¿é—®åº”ç”¨

- Web ç•Œé¢ï¼šhttp://localhost:8000
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ docker-composeï¼ˆæ¨èï¼‰
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ‰‹åŠ¨æ„å»ºè¿è¡Œ
```bash
# æ„å»ºé•œåƒ
docker build -t ai-qa-app .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 --env-file .env ai-qa-app
```

## ğŸ“– API æ–‡æ¡£

### è®¤è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/v1/auth/login` | ç”¨æˆ·ç™»å½• |
| GET | `/api/v1/auth/me` | è·å–å½“å‰ç”¨æˆ· |

### å¯¹è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/conversations` | åˆ›å»ºä¼šè¯ |
| GET | `/api/v1/conversations` | è·å–ä¼šè¯åˆ—è¡¨ |
| POST | `/api/v1/conversations/{session_id}/messages` | å‘é€æ¶ˆæ¯ |
| POST | `/api/v1/conversations/{session_id}/messages/stream` | å‘é€æ¶ˆæ¯ï¼ˆæµå¼ï¼‰ |
| GET | `/api/v1/conversations/{session_id}/messages` | è·å–å¯¹è¯å†å² |
| DELETE | `/api/v1/conversations/{session_id}` | åˆ é™¤ä¼šè¯ |

### çŸ¥è¯†åº“æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/knowledge-bases` | åˆ›å»ºçŸ¥è¯†åº“ |
| GET | `/api/v1/knowledge-bases` | è·å–çŸ¥è¯†åº“åˆ—è¡¨ |
| GET | `/api/v1/knowledge-bases/{kb_id}` | è·å–çŸ¥è¯†åº“è¯¦æƒ… |
| PUT | `/api/v1/knowledge-bases/{kb_id}` | æ›´æ–°çŸ¥è¯†åº“ |
| DELETE | `/api/v1/knowledge-bases/{kb_id}` | åˆ é™¤çŸ¥è¯†åº“ |
| POST | `/api/v1/knowledge-bases/{kb_id}/documents/text` | æ·»åŠ æ–‡æœ¬ |
| POST | `/api/v1/knowledge-bases/{kb_id}/documents/upload` | ä¸Šä¼ æ–‡ä»¶ |

### Agent æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| POST | `/api/v1/agent/chat` | Agent å¯¹è¯ |
| POST | `/api/v1/agent/chat/stream` | Agent å¯¹è¯ï¼ˆæµå¼ï¼‰ |

### MCP è®¾ç½®æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|-----|------|------|
| GET | `/api/v1/mcp/servers` | è·å–å¯ç”¨çš„ MCP Server åˆ—è¡¨ |
| GET | `/api/v1/mcp/settings` | è·å–ç”¨æˆ· MCP è®¾ç½® |
| PUT | `/api/v1/mcp/settings` | æ›´æ–° MCP è®¾ç½® |

## ğŸ”§ æ ¸å¿ƒè®¾è®¡

### Clean Architecture

é‡‡ç”¨æ•´æ´æ¶æ„ï¼Œä¾èµ–æ–¹å‘ä»å¤–åˆ°å†…ï¼š

- **é¢†åŸŸå±‚**ï¼šå®šä¹‰ä¸šåŠ¡å®ä½“å’Œæ¥å£ï¼ˆPortsï¼‰
- **åº”ç”¨å±‚**ï¼šç¼–æ’ä¸šåŠ¡é€»è¾‘ï¼Œä¸ä¾èµ–å…·ä½“æŠ€æœ¯
- **åŸºç¡€è®¾æ–½å±‚**ï¼šå®ç°æ¥å£ï¼ˆAdaptersï¼‰ï¼Œå¯¹æ¥å¤–éƒ¨æœåŠ¡
- **æ¥å£å±‚**ï¼šæš´éœ² APIã€CLIã€Web ç­‰å…¥å£

### RAG æµç¨‹

```
ç¦»çº¿å»ºåº“ï¼šæ–‡æ¡£ â†’ åˆ‡åˆ† â†’ Embedding â†’ å‘é‡æ•°æ®åº“
åœ¨çº¿é—®ç­”ï¼šé—®é¢˜ â†’ æŸ¥è¯¢æ”¹å†™ï¼ˆè§£å†³æŒ‡ä»£ï¼‰ â†’ Embedding â†’ æ£€ç´¢ Top-K â†’ æ‹¼æ¥ Prompt â†’ LLM ç”Ÿæˆ
```

### Agent å·¥å…·è°ƒç”¨æµç¨‹

```
ç”¨æˆ·é—®é¢˜ â†’ LLM å†³ç­– â†’ éœ€è¦å·¥å…·? 
    â”œâ”€ æ˜¯ â†’ æ‰§è¡Œå·¥å…· â†’ ç»“æœè¿”å› LLM â†’ ç»§ç»­å†³ç­–...
    â””â”€ å¦ â†’ ç›´æ¥ç”Ÿæˆå›ç­”
```

### MCP é›†æˆæ¶æ„

```
mcp_servers.json (é…ç½®) â†’ MCPClientService (å®¢æˆ·ç«¯)
                              â†“
                        è¿æ¥ MCP Server
                              â†“
                     è·å–å·¥å…·åˆ—è¡¨ â†’ è½¬æ¢ä¸º LangChain å·¥å…·
                              â†“
                        AgentService è°ƒç”¨
```


## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
pytest --cov=ai_qa
```

## ğŸ—ºï¸ å¼€å‘è®¡åˆ’

- [x] æ™ºèƒ½å¯¹è¯ï¼šå¤šè½®å¯¹è¯ã€ä¸Šä¸‹æ–‡è®°å¿†
- [x] RAG çŸ¥è¯†åº“ï¼šæ–‡æ¡£ä¸Šä¼ ã€å‘é‡æ£€ç´¢
- [x] æŸ¥è¯¢æ”¹å†™ï¼šè§£å†³å¯¹è¯ä¸­çš„æŒ‡ä»£é—®é¢˜
- [x] æµå¼å“åº”ï¼šSSE å®æ—¶è¿”å›
- [x] ç”¨æˆ·è®¤è¯ï¼šJWT Tokenã€å¤šç”¨æˆ·æ”¯æŒ
- [x] PostgreSQLï¼šå¯¹è¯å†å²ã€å‘é‡å­˜å‚¨æŒä¹…åŒ–
- [x] Docker éƒ¨ç½²ï¼šå®¹å™¨åŒ–æ–¹æ¡ˆ
- [x] å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- [x] Agent å·¥å…·è°ƒç”¨ï¼šè®¡ç®—å™¨ã€æ—¶é—´ã€çŸ¥è¯†åº“æ£€ç´¢
- [x] MCP åè®®æ”¯æŒï¼šåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·
- [ ] Agent æ€ç»´é“¾
- [ ] å¤š LLM æä¾›å•†ï¼ˆOpenAIã€Claudeï¼‰
- [ ] å¯¹è¯æ‘˜è¦/é•¿æœŸè®°å¿†
- [ ] å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—


## ğŸ“„ è®¸å¯è¯

MIT License